{"ast":null,"code":"import _slicedToArray from\"/Users/home/Desktop/the node/node+react/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/home/Desktop/the node/node+react/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import Layout from'../common/Layout';import{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var BtnSet=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\\tgap: 20px;\\n\\tmargin-top: 20px;\\n\\tpadding-bottom: 60px;\\n\"])));var Form=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\tbackground-color: white;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tpadding-top: 60px;\\n\\tborder-radius: 10px;\\n\\tmargin-bottom: auto;\\n\\tbox-shadow: 10px 10px 20px rgba(0, 0, 0, 0.2);\\n\"])));function Edit(){var params=useParams();var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),Detail=_useState2[0],setDetail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),Title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),Content=_useState6[0],setContent=_useState6[1];var handleUpdate=function handleUpdate(){if(Title.trim()===''||Content.trim()==='')return alert('모든 항목을 입력하세요');var item={title:Title,content:Content,num:params.num};axios.put('/api/community/edit',item).then(function(res){if(res.data.success){alert('글 수정이 완료되었습니다.');navigate(\"/detail/\".concat(params.num));}else{alert('글 수정에 실패했습니다.');}}).catch(function(err){return console.log(err);});};useEffect(function(){axios.get(\"/api/community/detail/\".concat(params.num)).then(function(res){if(res.data.success){setDetail(res.data.detail);}});},[params]);useEffect(function(){setTitle(Detail.title);setContent(Detail.content);},[Detail]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Layout,{name:'Edit',children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tit\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"tit\",value:Title||'',onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"con\",children:\"Content\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"cons\",id:\"id\",cols:\"30\",rows:\"3\",value:Content||'',onChange:function onChange(e){return setContent(e.target.value);}}),/*#__PURE__*/_jsxs(BtnSet,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate(-1);},children:\"CANCEL\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdate,children:\"UPDATE\"})]})]})})});}export default Edit;","map":{"version":3,"names":["Layout","useState","useEffect","useParams","useNavigate","axios","styled","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BtnSet","div","_templateObject","_taggedTemplateLiteral","Form","_templateObject2","Edit","params","navigate","_useState","_useState2","_slicedToArray","Detail","setDetail","_useState3","_useState4","Title","setTitle","_useState5","_useState6","Content","setContent","handleUpdate","trim","alert","item","title","content","num","put","then","res","data","success","concat","catch","err","console","log","get","detail","children","name","htmlFor","type","id","value","onChange","e","target","cols","rows","onClick"],"sources":["/Users/home/Desktop/the node/node+react/client/src/community/Edit.jsx"],"sourcesContent":["import Layout from '../common/Layout';\nimport { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport styled from 'styled-components';\n\nconst BtnSet = styled.div`\n\tdisplay: flex;\n\tgap: 20px;\n\tmargin-top: 20px;\n\tpadding-bottom: 60px;\n`;\nconst Form = styled.div`\n\tbackground-color: white;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding-top: 60px;\n\tborder-radius: 10px;\n\tmargin-bottom: auto;\n\tbox-shadow: 10px 10px 20px rgba(0, 0, 0, 0.2);\n`;\n\nfunction Edit() {\n\tconst params = useParams();\n\tconst navigate = useNavigate();\n\tconst [Detail, setDetail] = useState({});\n\tconst [Title, setTitle] = useState('');\n\tconst [Content, setContent] = useState('');\n\n\tconst handleUpdate = () => {\n\t\tif (Title.trim() === '' || Content.trim() === '') return alert('모든 항목을 입력하세요');\n\n\t\tconst item = {\n\t\t\ttitle: Title,\n\t\t\tcontent: Content,\n\t\t\tnum: params.num,\n\t\t};\n\n\t\taxios\n\t\t\t.put('/api/community/edit', item)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.data.success) {\n\t\t\t\t\talert('글 수정이 완료되었습니다.');\n\t\t\t\t\tnavigate(`/detail/${params.num}`);\n\t\t\t\t} else {\n\t\t\t\t\talert('글 수정에 실패했습니다.');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t};\n\n\tuseEffect(() => {\n\t\taxios.get(`/api/community/detail/${params.num}`).then((res) => {\n\t\t\tif (res.data.success) {\n\t\t\t\tsetDetail(res.data.detail);\n\t\t\t}\n\t\t});\n\t}, [params]);\n\n\tuseEffect(() => {\n\t\tsetTitle(Detail.title);\n\t\tsetContent(Detail.content);\n\t}, [Detail]);\n\n\treturn (\n\t\t<>\n\t\t\t<Layout name={'Edit'}>\n\t\t\t\t<Form>\n\t\t\t\t\t<label htmlFor='tit'>Title</label>\n\t\t\t\t\t<input type='text' id='tit' value={Title || ''} onChange={(e) => setTitle(e.target.value)} />\n\t\t\t\t\t<label htmlFor='con'>Content</label>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tname='cons'\n\t\t\t\t\t\tid='id'\n\t\t\t\t\t\tcols='30'\n\t\t\t\t\t\trows='3'\n\t\t\t\t\t\tvalue={Content || ''}\n\t\t\t\t\t\tonChange={(e) => setContent(e.target.value)}\n\t\t\t\t\t></textarea>\n\n\t\t\t\t\t<BtnSet>\n\t\t\t\t\t\t<button onClick={() => navigate(-1)}>CANCEL</button>\n\t\t\t\t\t\t<button onClick={handleUpdate}>UPDATE</button>\n\t\t\t\t\t</BtnSet>\n\t\t\t\t</Form>\n\t\t\t</Layout>\n\t\t</>\n\t);\n}\n\nexport default Edit;\n"],"mappings":"6TAAA,MAAO,CAAAA,MAAM,KAAM,kBAAkB,CACrC,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEvC,GAAM,CAAAC,MAAM,CAAGP,MAAM,CAACQ,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,wFAKxB,CACD,GAAM,CAAAC,IAAI,CAAGX,MAAM,CAACQ,GAAG,CAAAI,gBAAA,GAAAA,gBAAA,CAAAF,sBAAA,+PAUtB,CAED,QAAS,CAAAG,IAAIA,CAAA,CAAG,CACf,GAAM,CAAAC,MAAM,CAAGjB,SAAS,EAAE,CAC1B,GAAM,CAAAkB,QAAQ,CAAGjB,WAAW,EAAE,CAC9B,IAAAkB,SAAA,CAA4BrB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAsB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,IAAAI,UAAA,CAA0B1B,QAAQ,CAAC,EAAE,CAAC,CAAA2B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAA8B9B,QAAQ,CAAC,EAAE,CAAC,CAAA+B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAE1B,GAAM,CAAAG,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CAC1B,GAAIN,KAAK,CAACO,IAAI,EAAE,GAAK,EAAE,EAAIH,OAAO,CAACG,IAAI,EAAE,GAAK,EAAE,CAAE,MAAO,CAAAC,KAAK,CAAC,cAAc,CAAC,CAE9E,GAAM,CAAAC,IAAI,CAAG,CACZC,KAAK,CAAEV,KAAK,CACZW,OAAO,CAAEP,OAAO,CAChBQ,GAAG,CAAErB,MAAM,CAACqB,GACb,CAAC,CAEDpC,KAAK,CACHqC,GAAG,CAAC,qBAAqB,CAAEJ,IAAI,CAAC,CAChCK,IAAI,CAAC,SAACC,GAAG,CAAK,CACd,GAAIA,GAAG,CAACC,IAAI,CAACC,OAAO,CAAE,CACrBT,KAAK,CAAC,gBAAgB,CAAC,CACvBhB,QAAQ,YAAA0B,MAAA,CAAY3B,MAAM,CAACqB,GAAG,EAAG,CAClC,CAAC,IAAM,CACNJ,KAAK,CAAC,eAAe,CAAC,CACvB,CACD,CAAC,CAAC,CACDW,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACnC,CAAC,CAED/C,SAAS,CAAC,UAAM,CACfG,KAAK,CAAC+C,GAAG,0BAAAL,MAAA,CAA0B3B,MAAM,CAACqB,GAAG,EAAG,CAACE,IAAI,CAAC,SAACC,GAAG,CAAK,CAC9D,GAAIA,GAAG,CAACC,IAAI,CAACC,OAAO,CAAE,CACrBpB,SAAS,CAACkB,GAAG,CAACC,IAAI,CAACQ,MAAM,CAAC,CAC3B,CACD,CAAC,CAAC,CACH,CAAC,CAAE,CAACjC,MAAM,CAAC,CAAC,CAEZlB,SAAS,CAAC,UAAM,CACf4B,QAAQ,CAACL,MAAM,CAACc,KAAK,CAAC,CACtBL,UAAU,CAACT,MAAM,CAACe,OAAO,CAAC,CAC3B,CAAC,CAAE,CAACf,MAAM,CAAC,CAAC,CAEZ,mBACCjB,IAAA,CAAAI,SAAA,EAAA0C,QAAA,cACC9C,IAAA,CAACR,MAAM,EAACuD,IAAI,CAAE,MAAO,CAAAD,QAAA,cACpB5C,KAAA,CAACO,IAAI,EAAAqC,QAAA,eACJ9C,IAAA,UAAOgD,OAAO,CAAC,KAAK,CAAAF,QAAA,CAAC,OAAK,EAAQ,cAClC9C,IAAA,UAAOiD,IAAI,CAAC,MAAM,CAACC,EAAE,CAAC,KAAK,CAACC,KAAK,CAAE9B,KAAK,EAAI,EAAG,CAAC+B,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAA/B,QAAQ,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,EAAC,EAAG,cAC7FnD,IAAA,UAAOgD,OAAO,CAAC,KAAK,CAAAF,QAAA,CAAC,SAAO,EAAQ,cACpC9C,IAAA,aACC+C,IAAI,CAAC,MAAM,CACXG,EAAE,CAAC,IAAI,CACPK,IAAI,CAAC,IAAI,CACTC,IAAI,CAAC,GAAG,CACRL,KAAK,CAAE1B,OAAO,EAAI,EAAG,CACrB2B,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAA3B,UAAU,CAAC2B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,EAAC,EACjC,cAEZjD,KAAA,CAACG,MAAM,EAAAyC,QAAA,eACN9C,IAAA,WAAQyD,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA5C,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAC,CAAAiC,QAAA,CAAC,QAAM,EAAS,cACpD9C,IAAA,WAAQyD,OAAO,CAAE9B,YAAa,CAAAmB,QAAA,CAAC,QAAM,EAAS,GACtC,GACH,EACC,EACP,CAEL,CAEA,cAAe,CAAAnC,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}