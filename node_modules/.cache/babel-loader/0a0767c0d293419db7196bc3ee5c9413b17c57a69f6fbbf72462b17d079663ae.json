{"ast":null,"code":"import _slicedToArray from\"/Users/home/Desktop/the node/node+react/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/home/Desktop/the node/node+react/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import Layout from'../common/Layout';import{useParams,Link,useNavigate}from'react-router-dom';import axios from'axios';import{useEffect,useState}from'react';import styled from'styled-components';import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DetailWrap=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\twidth: 100%;\\n\\tpadding: 40px;\\n\\tbackground: #fff;\\n\\tbox-shadow: 10px 10px 20px rgba(0, 0, 0, 0.02);\\n\\tborder-radius: 10px;\\n\\tbox-shadow: 10px 10px 20px rgba(0, 0, 0, 0.2);\\n\"])));var BtnSet=styled.nav(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\\tgap: 20px;\\n\\tmargin-top: 20px;\\n\"])));function Detail(){var user=useSelector(function(store){return store.user;});var params=useParams();var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),Detail=_useState2[0],setDetail=_useState2[1];var handleDelete=function handleDelete(){if(!window.confirm('정말 삭제하겠습니까?'))return;axios.delete(\"/api/community/delete/\".concat(params.num)).then(function(res){if(res.data.success){alert('게시글이 삭제되었습니다.');navigate('/list');}else{alert('게시글 삭제에 실패했습니다.');}}).catch(function(err){return console.log(err);});};useEffect(function(){axios.get(\"/api/community/detail/\".concat(params.num)).then(function(res){if(res.data.success){setDetail(res.data.detail);}else{alert('상세글 호출에 실패했습니다.');}}).catch(function(err){return console.log(err);});},[params]);return/*#__PURE__*/_jsx(Layout,{name:'Detail',children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(DetailWrap,{children:[/*#__PURE__*/_jsx(\"h2\",{children:Detail===null||Detail===void 0?void 0:Detail.title}),/*#__PURE__*/_jsx(\"p\",{children:Detail===null||Detail===void 0?void 0:Detail.content}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uC791\\uC131\\uC790: \",Detail===null||Detail===void 0?void 0:Detail.writer.displayName]}),(Detail===null||Detail===void 0?void 0:Detail.createdAt)===(Detail===null||Detail===void 0?void 0:Detail.updatedAt)?/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC791\\uC131\\uC77C: \",Detail===null||Detail===void 0?void 0:Detail.createdAt.split('T')[0]]}):/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC218\\uC815\\uC77C: \",Detail===null||Detail===void 0?void 0:Detail.updatedAt.split('T')[0]]})]}),user.uid===(Detail===null||Detail===void 0?void 0:Detail.writer.uid)&&/*#__PURE__*/_jsxs(BtnSet,{children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(params.num),children:\"Edit\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,children:\"Delete\"})]})]})});}export default Detail;","map":{"version":3,"names":["Layout","useParams","Link","useNavigate","axios","useEffect","useState","styled","useSelector","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DetailWrap","div","_templateObject","_taggedTemplateLiteral","BtnSet","nav","_templateObject2","Detail","user","store","params","navigate","_useState","_useState2","_slicedToArray","setDetail","handleDelete","window","confirm","delete","concat","num","then","res","data","success","alert","catch","err","console","log","get","detail","name","children","title","content","writer","displayName","createdAt","updatedAt","split","uid","to","onClick"],"sources":["/Users/home/Desktop/the node/node+react/client/src/community/Detail.jsx"],"sourcesContent":["import Layout from '../common/Layout';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'react-redux';\n\nconst DetailWrap = styled.div`\n\twidth: 100%;\n\tpadding: 40px;\n\tbackground: #fff;\n\tbox-shadow: 10px 10px 20px rgba(0, 0, 0, 0.02);\n\tborder-radius: 10px;\n\tbox-shadow: 10px 10px 20px rgba(0, 0, 0, 0.2);\n`;\n\nconst BtnSet = styled.nav`\n\tdisplay: flex;\n\tgap: 20px;\n\tmargin-top: 20px;\n`;\n\nfunction Detail() {\n\tconst user = useSelector((store) => store.user);\n\tconst params = useParams();\n\tconst navigate = useNavigate();\n\tconst [Detail, setDetail] = useState(null);\n\n\tconst handleDelete = () => {\n\t\tif (!window.confirm('정말 삭제하겠습니까?')) return;\n\n\t\taxios\n\t\t\t.delete(`/api/community/delete/${params.num}`)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.data.success) {\n\t\t\t\t\talert('게시글이 삭제되었습니다.');\n\t\t\t\t\tnavigate('/list');\n\t\t\t\t} else {\n\t\t\t\t\talert('게시글 삭제에 실패했습니다.');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t};\n\n\tuseEffect(() => {\n\t\taxios\n\t\t\t.get(`/api/community/detail/${params.num}`)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.data.success) {\n\t\t\t\t\tsetDetail(res.data.detail);\n\t\t\t\t} else {\n\t\t\t\t\talert('상세글 호출에 실패했습니다.');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t}, [params]);\n\n\treturn (\n\t\t<Layout name={'Detail'}>\n\t\t\t{\n\t\t\t\t<>\n\t\t\t\t\t<DetailWrap>\n\t\t\t\t\t\t<h2>{Detail?.title}</h2>\n\t\t\t\t\t\t<p>{Detail?.content}</p>\n\t\t\t\t\t\t<span>작성자: {Detail?.writer.displayName}</span>\n\t\t\t\t\t\t{Detail?.createdAt === Detail?.updatedAt ? (\n\t\t\t\t\t\t\t<p>작성일: {Detail?.createdAt.split('T')[0]}</p>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<p>수정일: {Detail?.updatedAt.split('T')[0]}</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</DetailWrap>\n\n\t\t\t\t\t{/* 로그인된 사용자의 아이디와 글작성한 사용자의 아이디가 동일할 때에만 수정, 삭제버튼 출력 */}\n\t\t\t\t\t{user.uid === Detail?.writer.uid && (\n\t\t\t\t\t\t<BtnSet>\n\t\t\t\t\t\t\t<button>\n\t\t\t\t\t\t\t\t<Link to={`/edit/${params.num}`}>Edit</Link>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button onClick={handleDelete}>Delete</button>\n\t\t\t\t\t\t</BtnSet>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t}\n\t\t</Layout>\n\t);\n}\n\nexport default Detail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}